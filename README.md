# 🥬 中国农贸产品价格预测（以宁夏为例）

[![Python](https://img.shields.io/badge/Python-3.8%2B-blue.svg)](https://www.python.org/)  

---

## 📌 项目简介

本项目通过构建基于 **LSTM（长短期记忆网络）** 的时间序列模型，对中国宁夏地区的农贸产品（水果、蔬菜、肉类）价格进行预测。项目涵盖了从数据采集、预处理、模型训练到结果可视化的完整流程，旨在为农贸市场参与者提供决策支持。

---

## 📂 项目结构

```bash
Agricultural-Products-Price-Forecasting/
├── 数据集汇总.py                  # 合并产品价格数据为宽表
├── 农产品价格数据爬取.py          # 多线程爬虫抓取历史价格
├── LSTM/
│   ├── lstm_forecast_all.py       # LSTM 模型训练与预测
│   └── requirements.txt           # Python 依赖库
├── 图组数据表/                     # 可视化图表与误差评估
│   ├── 水果类/
│   ├── 蔬菜类/
│   └── 肉类/
├── README.md                     # 项目说明文档（当前文件）
└── .idea/                        # IDE 配置文件（可忽略）
```

---

## 📖 目录

- [📌 项目简介](#-项目简介)
- [📂 项目结构](#-项目结构)
- [🔧 功能模块说明](#-功能模块说明)
- [⚙️ 环境配置](#️-环境配置)
- [🚀 使用流程](#-使用流程)
- [📊 成果展示与分析](#-成果展示与分析图组数据表)
- [📎 注意事项](#-注意事项)
- [🤝 项目贡献](#-项目贡献)
- [📄 许可证](#-许可证)
- [📬 联系方式](#-联系方式)

---

## 🔧 功能模块说明

### 1️⃣ 数据爬取（[`农产品价格数据爬取.py`](./农产品价格数据爬取.py)）

- **功能**：多线程抓取宁夏农产品批发价格历史数据；
- **依赖**：`requests`, `json`, `csv`, `concurrent.futures` 等；
- **使用说明**：修改参数即可自定义抓取时间范围：

```python
base_params = {
    "startTime": "20100110",
    "endTime": "20250410",
    "province": "宁夏",
    ...
}
```

---

### 2️⃣ 数据合并（[`数据集汇总.py`](./数据集汇总.py)）

- **功能**：将多个产品的 CSV 文件合并为以日期为索引的宽表格式；
- **输出**：`农产品批发价格宽表.csv`；
- **依赖**：`pandas`, `os`。

---

### 3️⃣ 价格预测（[`LSTM/lstm_forecast_all.py`](./LSTM/lstm_forecast_all.py)）

- **功能**：基于 LSTM 模型预测未来 30 天的价格走势；
- **依赖**：`TensorFlow`, `pandas`, `numpy`, `sklearn`；
- **输出**：每个产品的预测 CSV，保存在 `forecast_result/` 中。

---

## ⚙️ 环境配置

### ✅ 安装依赖

```bash
cd LSTM
pip install -r requirements.txt
```

---

## 🚀 使用流程

1. **运行数据爬虫**  
   `python 农产品价格数据爬取.py`

2. **合并数据集**  
   `python 数据集汇总.py` → 输出宽表 `农产品批发价格宽表.csv`

3. **运行预测模型**  
   - 将宽表放入 `data/` 目录；
   - 执行：`python LSTM/lstm_forecast_all.py`

4. **查看预测结果**  
   - 所有结果保存在 `forecast_result/` 文件夹；
   - 包括预测 CSV 与图表。

---

## 📊 成果展示与分析（图组数据表）

在 `图组数据表/` 文件夹中，存放了三类产品的详细分析数据与图表，包括：

- 📈 **误差指标表**（MAE、MSE）
- 📉 **损失函数曲线图**
- 🟩 **预测 vs 实际对比图**
- 📊 **误差分布柱状图**
- 📄 分析报告（`.docx` / `.pdf` / `.md`）

> 🔍 报告文件：《基于数据表和图组的水果、蔬菜、肉类分类分析及优化建议》

---

## 📎 注意事项

- **线程数调整（影响爬虫效率）**：

```python
MAX_WORKERS = 5  # 可根据带宽和机器性能调整
```

- **样本数限制**：产品样本数小于 10 条将被自动跳过；
- **时间格式统一**：请保持日期格式一致（如：`2011年1月1日`）。

---

## 🤝 项目贡献

欢迎贡献你的代码、想法或建议：

- 提交 Pull Request；
- 提交 Issue；
- Star 本项目支持我们 ⭐

---

## 📬 联系方式

- 📧 邮箱：`3217443077@qq.com`
- 🔗 GitHub：[github.com/LynnJY](https://github.com/LynnJY)

---

> ⚠️ **免责声明**：本项目所使用数据均来自公开渠道，仅用于学术研究与技术验证，严禁用于商业用途。

